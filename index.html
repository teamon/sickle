<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Sickle by teamon</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Sickle</h1>
      <h2 class="project-tagline">Sickle is dead simple library for building complex command line tools</h2>
      <a href="https://github.com/teamon/sickle" class="btn">View on GitHub</a>
      <a href="https://github.com/teamon/sickle/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/teamon/sickle/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p><a href="https://codeclimate.com/github/teamon/sickle"><img src="https://codeclimate.com/github/teamon/sickle.png" alt="Code Climate"></a>
<a href="https://travis-ci.org/teamon/sickle"><img src="https://travis-ci.org/teamon/sickle.png?branch=master" alt="Build Status"></a>
<a href="https://rubygems.org/gems/sickle"><img src="https://badge.fury.io/rb/sickle.png" alt="Gem Version"></a>
<a href="https://coveralls.io/r/teamon/sickle"><img src="https://coveralls.io/repos/teamon/sickle/badge.png?branch=master" alt="Coverage Status"></a></p>

<h1>
<a id="sickle" class="anchor" href="#sickle" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sickle</h1>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h2>

<p>Sickle is dead simple library for building complex command line tools. A lot of ideas and examples were inspired by <a href="https://github.com/wycats/thor">thor</a>.</p>

<h4>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features:</h4>

<ul>
<li>Based on classes and modules</li>
<li>Support for commands</li>
<li>Support for namespaces</li>
<li>Support for command options and global options</li>
<li>Usage and help for free</li>
<li>No external dependencies (only stdlib optparse)</li>
</ul>

<h4>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h4>

<ul>
<li>Ruby: 1.9.x, 2.0.x, jruby (1.9), rbx (1.9)</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>You are probably building command line tool that will be released as gem, just add that line to you gemspec.</p>

<div class="highlight highlight-source-ruby"><pre>spec.add_dependency <span class="pl-s"><span class="pl-pds">'</span>sickle<span class="pl-pds">'</span></span></pre></div>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic usage</h3>

<p>Simple create a class with methods and some options</p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">require</span> <span class="pl-s"><span class="pl-pds">"</span>sickle<span class="pl-pds">"</span></span>

<span class="pl-k">class</span> <span class="pl-en">App</span>
  <span class="pl-k">include</span> <span class="pl-c1">Sickle</span>::<span class="pl-c1">Runner</span>

  global_flag <span class="pl-c1">:verbose</span>                        <span class="pl-c"># global flag, defaults to false</span>
  global_option <span class="pl-c1">:with_prefix</span>                  <span class="pl-c"># global option, defaults to nil</span>

  <span class="pl-c"># optional before hook with access to global options</span>
  before <span class="pl-k">do</span>
    <span class="pl-smi">$verbose</span> <span class="pl-k">=</span> options[<span class="pl-c1">:verbose</span>]
  <span class="pl-k">end</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>install one of the available apps<span class="pl-pds">"</span></span>    <span class="pl-c"># command description</span>
  flag <span class="pl-c1">:force</span>                                 <span class="pl-c"># flag for `install` command</span>
  option <span class="pl-c1">:host</span>, <span class="pl-c1">:default</span> =&gt; <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>       <span class="pl-c"># option</span>
  <span class="pl-k">def</span> <span class="pl-en">install</span>(<span class="pl-smi">name</span>)
    <span class="pl-k">if</span> options[<span class="pl-c1">:force</span>]                         <span class="pl-c"># access options</span>
      do_smth_with options[<span class="pl-c1">:host</span>]
    <span class="pl-k">end</span>
    <span class="pl-c"># the rest</span>
  <span class="pl-k">end</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>list all apps, search is possible<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">list</span>(<span class="pl-smi">search</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>)
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>

<span class="pl-k">end</span>

<span class="pl-c1">App</span>.run(<span class="pl-c1">ARGV</span>) <span class="pl-c"># start parsing ARGV</span></pre></div>

<p>This will allow for execution command like:</p>

<div class="highlight highlight-source-shell"><pre>$ mytool install foo
$ mytool install foo --force --verbose --host 127.0.0.1
$ mytool list
$ mytool list rails --verbose</pre></div>

<p>Help is for free:</p>

<pre><code>$ mytool help
USAGE:
  mytool COMMAND [ARG1, ARG2, ...] [OPTIONS]

TASKS:
  help [COMMAND]
  install NAME    # install one of the available apps
  list [SEARCH]   # list all apps, search is possible

GLOBAL OPTIONS:
  --verbose (default: false)
</code></pre>

<p>There is also detailed help for command:</p>

<div class="highlight highlight-source-shell"><pre>$ mytool <span class="pl-c1">help</span> install
USAGE:
  mytool install NAME

DESCRIPTION:
  install one of the available apps

OPTIONS:
  --force (default: <span class="pl-c1">false</span>)
  --host (default: localhost)</pre></div>

<h3>
<a id="advanced-usage---multiple-modules" class="anchor" href="#advanced-usage---multiple-modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced usage - multiple modules</h3>

<div class="highlight highlight-source-ruby"><pre><span class="pl-k">module</span> <span class="pl-en">Users</span>
  <span class="pl-k">include</span> <span class="pl-c1">Sickle</span>::<span class="pl-c1">Runner</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>list all users<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">list</span>
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>create new user<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">create</span>(<span class="pl-smi">name</span>)
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

<span class="pl-k">module</span> <span class="pl-en">Projects</span>
  <span class="pl-k">include</span> <span class="pl-c1">Sickle</span>::<span class="pl-c1">Runner</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>list all projects<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">list</span>
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

<span class="pl-k">module</span> <span class="pl-en">Global</span>
  <span class="pl-k">include</span> <span class="pl-c1">Sickle</span>::<span class="pl-c1">Runner</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>have some fun at top level<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">fun</span>
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>
<span class="pl-k">end</span>

<span class="pl-k">class</span> <span class="pl-en">App</span>
  <span class="pl-k">include</span> <span class="pl-c1">Sickle</span>::<span class="pl-c1">Runner</span>

  desc <span class="pl-s"><span class="pl-pds">"</span>top level command<span class="pl-pds">"</span></span>
  <span class="pl-k">def</span> <span class="pl-en">main</span>
    <span class="pl-c"># ...</span>
  <span class="pl-k">end</span>

  include_modules <span class="pl-c1">:users</span> =&gt; <span class="pl-c1">Users</span>,      <span class="pl-c"># bind commands from Users module under "users" namespace</span>
                  <span class="pl-c1">:p</span>     =&gt; <span class="pl-c1">Projects</span>    <span class="pl-c"># bind commands from Projects module under "p" namespace</span>

  <span class="pl-k">include</span> <span class="pl-c1">Global</span>                        <span class="pl-c"># bind command from Global module at top level namespace</span>
<span class="pl-k">end</span>

<span class="pl-c1">App</span>.run(<span class="pl-c1">ARGV</span>)
</pre></div>

<p>Run <code>$ mytool help</code> to see how commands are namespaced:</p>

<div class="highlight highlight-source-shell"><pre>$ mytool <span class="pl-c1">help</span>
USAGE:
  mytool COMMAND [ARG1, ARG2, ...] [OPTIONS]

TASKS:
  fun                <span class="pl-c"># have some fun at top level</span>
  <span class="pl-c1">help</span> [COMMAND]
  main               <span class="pl-c"># top level command</span>
  p:list             <span class="pl-c"># list all projects</span>
  users:create NAME  <span class="pl-c"># create new user</span>
  users:list         <span class="pl-c"># list all users</span></pre></div>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/teamon/sickle">Sickle</a> is maintained by <a href="https://github.com/teamon">teamon</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
